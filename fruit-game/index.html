<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>æ°´æœæ¥æ¥ä¹ - H5å°æ¸¸æˆ</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Arial Rounded MT Bold', 'Microsoft YaHei', sans-serif;
            -webkit-tap-highlight-color: transparent;
        }
        
        body {
            background: linear-gradient(135deg, #1a2980, #26d0ce);
            color: white;
            min-height: 100vh;
            overflow-x: hidden;
            padding: 20px;
        }
        
        .container {
            max-width: 800px;
            margin: 0 auto;
            text-align: center;
        }
        
        header {
            padding: 20px 0;
            margin-bottom: 20px;
        }
        
        h1 {
            font-size: 2.8rem;
            margin-bottom: 10px;
            text-shadow: 3px 3px 6px rgba(0, 0, 0, 0.3);
            color: #FFD700;
        }
        
        .subtitle {
            font-size: 1.2rem;
            opacity: 0.9;
        }
        
        .game-container {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 25px;
            margin-bottom: 25px;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.3);
            border: 2px solid rgba(255, 255, 255, 0.2);
        }
        
        .stats-bar {
            display: flex;
            justify-content: space-between;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 50px;
            padding: 15px 25px;
            margin-bottom: 25px;
            font-size: 1.3rem;
        }
        
        .stat {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .stat i {
            color: #FFD700;
            font-size: 1.5rem;
        }
        
        #game-area {
            position: relative;
            width: 100%;
            height: 500px;
            background: rgba(0, 20, 40, 0.7);
            border-radius: 15px;
            overflow: hidden;
            border: 3px solid rgba(255, 255, 255, 0.1);
            margin-bottom: 20px;
        }
        
        #basket {
            position: absolute;
            bottom: 20px;
            left: 50%;
            width: 120px;
            height: 60px;
            background: linear-gradient(to right, #FF6B6B, #FF8E53);
            border-radius: 60px 60px 0 0;
            transform: translateX(-50%);
            transition: left 0.1s;
            box-shadow: 0 -5px 20px rgba(255, 107, 107, 0.5);
            z-index: 10;
        }
        
        .fruit {
            position: absolute;
            border-radius: 50%;
            font-size: 2rem;
            display: flex;
            align-items: center;
            justify-content: center;
            text-shadow: 1px 1px 3px rgba(0,0,0,0.5);
            transition: transform 0.2s;
        }
        
        .fruit:hover {
            transform: scale(1.1);
        }
        
        .controls {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 20px;
        }
        
        .btn {
            background: linear-gradient(45deg, #FF6B6B, #FF8E53);
            color: white;
            border: none;
            padding: 18px 35px;
            font-size: 1.2rem;
            border-radius: 50px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 10px;
            transition: all 0.3s;
            box-shadow: 0 8px 20px rgba(255, 107, 107, 0.4);
        }
        
        .btn:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 25px rgba(255, 107, 107, 0.6);
        }
        
        .btn:active {
            transform: translateY(0);
        }
        
        .btn-start {
            background: linear-gradient(45deg, #4ECDC4, #44A08D);
        }
        
        .btn-reset {
            background: linear-gradient(45deg, #556270, #4ECDC4);
        }
        
        .instructions {
            background: rgba(255, 255, 255, 0.08);
            border-radius: 15px;
            padding: 25px;
            margin-top: 25px;
            text-align: left;
        }
        
        .instructions h3 {
            color: #4ECDC4;
            margin-bottom: 15px;
            font-size: 1.5rem;
        }
        
        .instructions ul {
            list-style: none;
            padding-left: 10px;
        }
        
        .instructions li {
            margin-bottom: 12px;
            padding-left: 30px;
            position: relative;
        }
        
        .instructions li:before {
            content: "â€¢";
            color: #FFD700;
            font-size: 1.8rem;
            position: absolute;
            left: 0;
            top: -5px;
        }
        
        .game-over {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0, 0, 0, 0.9);
            padding: 40px;
            border-radius: 20px;
            text-align: center;
            z-index: 100;
            display: none;
            border: 3px solid #FFD700;
            box-shadow: 0 0 40px rgba(255, 215, 0, 0.5);
        }
        
        .game-over h2 {
            color: #FFD700;
            font-size: 3rem;
            margin-bottom: 20px;
        }
        
        .game-over p {
            font-size: 1.5rem;
            margin-bottom: 30px;
        }
        
        @media (max-width: 768px) {
            h1 { font-size: 2.2rem; }
            #game-area { height: 400px; }
            .stats-bar { flex-direction: column; gap: 15px; }
            .controls { flex-direction: column; }
            .btn { justify-content: center; }
        }
        
        @media (max-width: 480px) {
            h1 { font-size: 1.8rem; }
            #game-area { height: 350px; }
            .game-container { padding: 15px; }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1><i class="fas fa-apple-alt"></i> æ°´æœæ¥æ¥ä¹</h1>
            <p class="subtitle">ç§»åŠ¨ç¯®å­æ¥ä½æ‰ä¸‹çš„æ°´æœï¼Œæ¯æ¥ä¸€ä¸ªå¾—10åˆ†ï¼Œæ¼æ‰3ä¸ªæ¸¸æˆç»“æŸï¼</p>
        </header>
        
        <main>
            <div class="game-container">
                <div class="stats-bar">
                    <div class="stat">
                        <i class="fas fa-star"></i>
                        <span>å¾—åˆ†: <span id="score">0</span></span>
                    </div>
                    <div class="stat">
                        <i class="fas fa-heart"></i>
                        <span>ç”Ÿå‘½: <span id="lives">3</span></span>
                    </div>
                    <div class="stat">
                        <i class="fas fa-clock"></i>
                        <span>æ—¶é—´: <span id="timer">60</span>ç§’</span>
                    </div>
                    <div class="stat">
                        <i class="fas fa-trophy"></i>
                        <span>æœ€é«˜åˆ†: <span id="high-score">0</span></span>
                    </div>
                </div>
                
                <div id="game-area">
                    <div id="basket"></div>
                    <!-- æ°´æœä¼šé€šè¿‡JSåŠ¨æ€ç”Ÿæˆ -->
                </div>
                
                <div class="controls">
                    <button class="btn btn-start" id="start-btn">
                        <i class="fas fa-play"></i> å¼€å§‹æ¸¸æˆ
                    </button>
                    <button class="btn" id="left-btn">
                        <i class="fas fa-arrow-left"></i> å‘å·¦ç§»åŠ¨
                    </button>
                    <button class="btn" id="right-btn">
                        <i class="fas fa-arrow-right"></i> å‘å³ç§»åŠ¨
                    </button>
                    <button class="btn btn-reset" id="reset-btn">
                        <i class="fas fa-redo"></i> é‡æ–°å¼€å§‹
                    </button>
                </div>
                
                <div class="game-over" id="game-over">
                    <h2>æ¸¸æˆç»“æŸ</h2>
                    <p>æœ€ç»ˆå¾—åˆ†: <span id="final-score">0</span></p>
                    <button class="btn btn-start" id="restart-btn">
                        <i class="fas fa-play"></i> å†ç©ä¸€æ¬¡
                    </button>
                </div>
            </div>
            
            <div class="instructions">
                <h3><i class="fas fa-info-circle"></i> æ¸¸æˆè¯´æ˜</h3>
                <ul>
                    <li><strong>æ§åˆ¶æ–¹å¼</strong>: ç‚¹å‡»å·¦å³æŒ‰é’®æˆ–ä½¿ç”¨é”®ç›˜å·¦å³æ–¹å‘é”®ç§»åŠ¨ç¯®å­</li>
                    <li><strong>æ¸¸æˆç›®æ ‡</strong>: æ¥ä½æ‰è½çš„æ°´æœè·å¾—åˆ†æ•°ï¼Œæ¯ä¸ªæ°´æœ+10åˆ†</li>
                    <li><strong>æ¸¸æˆè§„åˆ™</strong>: æ¼æ‰3ä¸ªæ°´æœæˆ–æ—¶é—´å½’é›¶åˆ™æ¸¸æˆç»“æŸ</li>
                    <li><strong>æ°´æœç±»å‹</strong>: æ™®é€šæ°´æœ+10åˆ†ï¼Œé‡‘è‰²æ°´æœ+30åˆ†</li>
                    <li><strong>æ‰‹æœºç©æ³•</strong>: å¯ä»¥å€¾æ–œæ‰‹æœºæˆ–ç”¨æ‰‹æŒ‡å·¦å³æ»‘åŠ¨æ§åˆ¶</li>
                </ul>
            </div>
        </main>
        
        <footer style="margin-top: 30px; opacity: 0.7; font-size: 0.9rem;">
            <p>Â© 2023 æ°´æœæ¥æ¥ä¹ | ä½¿ç”¨çº¯HTML5+CSS3+JavaScriptå¼€å‘ | æ”¯æŒæ‰‹æœºå’Œç”µè„‘</p>
        </footer>
    </div>

    <script>
        // æ¸¸æˆå˜é‡
        let score = 0;
        let lives = 3;
        let timeLeft = 60;
        let highScore = localStorage.getItem('fruitHighScore') || 0;
        let gameInterval;
        let fruitInterval;
        let gameActive = false;
        let basketPosition = 50; // ç¯®å­ä½ç½®ç™¾åˆ†æ¯”
        
        // DOMå…ƒç´ 
        const gameArea = document.getElementById('game-area');
        const basket = document.getElementById('basket');
        const scoreElement = document.getElementById('score');
        const livesElement = document.getElementById('lives');
        const timerElement = document.getElementById('timer');
        const highScoreElement = document.getElementById('high-score');
        const gameOverScreen = document.getElementById('game-over');
        const finalScoreElement = document.getElementById('final-score');
        
        // åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', () => {
            highScoreElement.textContent = highScore;
            
            // äº‹ä»¶ç›‘å¬
            document.getElementById('start-btn').addEventListener('click', startGame);
            document.getElementById('reset-btn').addEventListener('click', resetGame);
            document.getElementById('restart-btn').addEventListener('click', restartGame);
            document.getElementById('left-btn').addEventListener('click', () => moveBasket(-10));
            document.getElementById('right-btn').addEventListener('click', () => moveBasket(10));
            
            // é”®ç›˜æ§åˆ¶
            document.addEventListener('keydown', (e) => {
                if (!gameActive) return;
                if (e.key === 'ArrowLeft') moveBasket(-15);
                if (e.key === 'ArrowRight') moveBasket(15);
            });
            
            // æ‰‹æœºè§¦æ‘¸æ§åˆ¶
            let touchStartX = 0;
            gameArea.addEventListener('touchstart', (e) => {
                if (!gameActive) return;
                touchStartX = e.touches[0].clientX;
                e.preventDefault();
            });
            
            gameArea.addEventListener('touchmove', (e) => {
                if (!gameActive) return;
                const touchX = e.touches[0].clientX;
                const diff = touchX - touchStartX;
                if (Math.abs(diff) > 10) {
                    moveBasket(diff / 5);
                    touchStartX = touchX;
                }
                e.preventDefault();
            });
            
            // æ‰‹æœºå€¾æ–œæ§åˆ¶ï¼ˆéœ€è¦è®¾å¤‡æ”¯æŒï¼‰
            if (window.DeviceOrientationEvent) {
                window.addEventListener('deviceorientation', (e) => {
                    if (!gameActive) return;
                    if (e.gamma) { // gammaæ˜¯å·¦å³å€¾æ–œ
                        const tilt = Math.min(20, Math.max(-20, e.gamma));
                        moveBasket(tilt * 1.5);
                    }
                });
            }
        });
        
        // å¼€å§‹æ¸¸æˆ
        function startGame() {
            if (gameActive) return;
            
            gameActive = true;
            score = 0;
            lives = 3;
            timeLeft = 60;
            
            updateUI();
            document.getElementById('start-btn').style.display = 'none';
            gameOverScreen.style.display = 'none';
            
            // æ¸…ç©ºæ°´æœ
            document.querySelectorAll('.fruit').forEach(fruit => fruit.remove());
            
            // æ¸¸æˆä¸»å¾ªç¯
            gameInterval = setInterval(() => {
                timeLeft--;
                updateUI();
                
                if (timeLeft <= 0) {
                    endGame();
                }
            }, 1000);
            
            // ç”Ÿæˆæ°´æœ
            fruitInterval = setInterval(createFruit, 800);
        }
        
        // åˆ›å»ºæ°´æœ
        function createFruit() {
            if (!gameActive) return;
            
            const fruit = document.createElement('div');
            fruit.className = 'fruit';
            
            // éšæœºæ°´æœç±»å‹
            const fruits = ['ğŸ', 'ğŸŠ', 'ğŸŒ', 'ğŸ‡', 'ğŸ“', 'ğŸŒŸ'];
            const fruitEmoji = fruits[Math.floor(Math.random() * fruits.length)];
            fruit.textContent = fruitEmoji;
            
            // éšæœºä½ç½®å’Œå¤§å°
            const size = fruitEmoji === 'ğŸŒŸ' ? 55 : 40 + Math.random() * 25;
            const left = 10 + Math.random() * 80;
            
            fruit.style.width = `${size}px`;
            fruit.style.height = `${size}px`;
            fruit.style.left = `${left}%`;
            fruit.style.top = '-60px';
            
            // é¢œè‰²
            if (fruitEmoji === 'ğŸŒŸ') {
                fruit.style.background = 'radial-gradient(circle, #FFD700, #FFA500)';
                fruit.style.fontSize = '1.8rem';
            } else if (fruitEmoji === 'ğŸ') {
                fruit.style.background = 'radial-gradient(circle, #FF6B6B, #C0392B)';
            } else if (fruitEmoji === 'ğŸŠ') {
                fruit.style.background = 'radial-gradient(circle, #FFA726, #EF6C00)';
            } else if (fruitEmoji === 'ğŸŒ') {
                fruit.style.background = 'radial-gradient(circle, #FFEE58, #F9A825)';
            } else {
                fruit.style.background = 'radial-gradient(circle, #9C27B0, #6A1B9A)';
            }
            
            gameArea.appendChild(fruit);
            
            // æ°´æœä¸‹è½åŠ¨ç”»
            let position = -60;
            const fallSpeed = 2 + Math.random() * 3;
            
            const fallInterval = setInterval(() => {
                if (!gameActive) {
                    clearInterval(fallInterval);
                    return;
                }
                
                position += fallSpeed;
                fruit.style.top = `${position}px`;
                
                // æ£€æµ‹æ˜¯å¦æ¥åˆ°æ°´æœ
                const fruitRect = fruit.getBoundingClientRect();
                const basketRect = basket.getBoundingClientRect();
                
                if (position > 400) { // æ¥è¿‘åº•éƒ¨
                    if (fruitRect.left < basketRect.right &&
                        fruitRect.right > basketRect.left &&
                        fruitRect.bottom > basketRect.top) {
                        
                        // æ¥åˆ°æ°´æœ
                        fruit.remove();
                        clearInterval(fallInterval);
                        
                        // åŠ åˆ†
                        const points = fruitEmoji === 'ğŸŒŸ' ? 30 : 10;
                        score += points;
                        
                        // æ˜¾ç¤ºå¾—åˆ†åŠ¨ç”»
                        showPoints(points, fruitRect.left + 20, fruitRect.top);
                        
                        updateUI();
                        playSound('collect');
                    }
                }
                
                // æ°´æœæ‰å‡ºå±å¹•
                if (position > 550) {
                    fruit.remove();
                    clearInterval(fallInterval);
                    
                    if (fruitEmoji !== 'ğŸŒŸ') { // é‡‘è‰²æ˜Ÿæ˜Ÿä¸æ‰ç”Ÿå‘½
                        lives--;
                        updateUI();
                        
                        if (lives <= 0) {
                            endGame();
                        }
                    }
                }
            }, 20);
        }
        
        // ç§»åŠ¨ç¯®å­
        function moveBasket(amount) {
            if (!gameActive) return;
            
            basketPosition = Math.max(10, Math.min(90, basketPosition + amount));
            basket.style.left = `${basketPosition}%`;
        }
        
        // æ˜¾ç¤ºå¾—åˆ†åŠ¨ç”»
        function showPoints(points, x, y) {
            const pointsPopup = document.createElement('div');
            pointsPopup.textContent = `+${points}`;
            pointsPopup.style.position = 'absolute';
            pointsPopup.style.left = `${x}px`;
            pointsPopup.style.top = `${y}px`;
            pointsPopup.style.color = points === 30 ? '#FFD700' : '#4ECDC4';
            pointsPopup.style.fontSize = '1.5rem';
            pointsPopup.style.fontWeight = 'bold';
            pointsPopup.style.textShadow = '2px 2px 4px rgba(0,0,0,0.8)';
            pointsPopup.style.zIndex = '100';
            pointsPopup.style.pointerEvents = 'none';
            
            gameArea.appendChild(pointsPopup);
            
            // åŠ¨ç”»
            let opacity = 1;
            let posY = y;
            const animation = setInterval(() => {
                opacity -= 0.03;
                posY -= 2;
                pointsPopup.style.opacity = opacity;
                pointsPopup.style.top = `${posY}px`;
                
                if (opacity <= 0) {
                    clearInterval(animation);
                    pointsPopup.remove();
                }
            }, 30);
        }
        
        // æ›´æ–°UI
        function updateUI() {
            scoreElement.textContent = score;
            livesElement.textContent = lives;
            timerElement.textContent = timeLeft;
            
            // æ›´æ–°ç”Ÿå‘½é¢œè‰²
            if (lives === 3) livesElement.style.color = '#4ECDC4';
            else if (lives === 2) livesElement.style.color = '#FFD700';
            else livesElement.style.color = '#FF6B6B';
        }
        
        // ç»“æŸæ¸¸æˆ
        function endGame() {
            gameActive = false;
            clearInterval(gameInterval);
            clearInterval(fruitInterval);
            
            // æ›´æ–°æœ€é«˜åˆ†
            if (score > highScore) {
                highScore = score;
                localStorage.setItem('fruitHighScore', highScore);
                highScoreElement.textContent = highScore;
            }
            
            // æ˜¾ç¤ºæ¸¸æˆç»“æŸç”»é¢
            finalScoreElement.textContent = score;
            gameOverScreen.style.display = 'block';
            document.getElementById('start-btn').style.display = 'flex';
            
            playSound('gameOver');
        }
        
        // é‡æ–°å¼€å§‹æ¸¸æˆ
        function restartGame() {
            endGame();
            setTimeout(startGame, 500);
        }
        
        // é‡ç½®æ¸¸æˆ
        function resetGame() {
            endGame();
            score = 0;
            lives = 3;
            timeLeft = 60;
            updateUI();
            document.querySelectorAll('.fruit').forEach(fruit => fruit.remove());
            gameOverScreen.style.display = 'none';
            document.getElementById('start-btn').style.display = 'flex';
        }
        
        // éŸ³æ•ˆï¼ˆä½¿ç”¨Web Audio APIï¼‰
        function playSound(type) {
            try {
                const audioContext = new (window.AudioContext || window.webkitAudioContext)();
                const oscillator = audioContext.createOscillator();
                const gainNode = audioContext.createGain();
                
                oscillator.connect(gainNode);
                gainNode.connect(audioContext.destination);
                
                if (type === 'collect') {
                    oscillator.frequency.setValueAtTime(523.25, audioContext.currentTime); // C5
                    oscillator.frequency.setValueAtTime(659.25, audioContext.currentTime + 0.1); // E5
                    gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
                    gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.3);
                    oscillator.start();
                    oscillator.stop(audioContext.currentTime + 0.3);
                } else if (type === 'gameOver') {
                    oscillator.frequency.setValueAtTime(392, audioContext.currentTime); // G4
                    oscillator.frequency.setValueAtTime(349.23, audioContext.currentTime + 0.2); // F4
                    oscillator.frequency.setValueAtTime(293.66, audioContext.currentTime + 0.4); // D4
                    gainNode.gain.setValueAtTime(0.4, audioContext.currentTime);
                    gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.6);
                    oscillator.start();
                    oscillator.stop(audioContext.currentTime + 0.6);
                }
            } catch (e) {
                console.log('éŸ³é¢‘æ’­æ”¾å¤±è´¥ï¼Œä¸å½±å“æ¸¸æˆ');
            }
        }
    </script>
</body>
</html>
